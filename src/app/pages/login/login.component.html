<div class="login-container">
  <div class="login-box">

    <!-- Login screen -->

    <form [formGroup]="loginForm" [hidden]="OTPScreen" (keyup.enter)="onSubmit(1)" style="margin-bottom: 50px">
      <label style="color: #00d084; align-items: self-start;margin-left: 8px;">Login</label>
      <div class="error" *ngIf="f.username.touched && f.username.invalid">
        <small *ngIf="f.username.errors?.['required']" style="color: red;">Email is required.</small>
        <small *ngIf="f.username.errors?.['email']" style="color: red;">Enter a valid email.</small>
      </div>
      <div class="input-group">
        <span class="icon"><i class="fas fa-user "></i></span>
        <span class="separator"></span>
        <input type="email" formControlName="username" autocomplete="off" placeholder="Enter email" />
      </div> 
      
      <div class="error" *ngIf="f.password.touched && f.password.invalid">
        <small *ngIf="f.password.errors?.['required']" style="color: red;">Password is required.</small>
      </div>
      <div class="input-group">
        <span class="icon"><i class="fas fa-key"></i></span>
        <span class="separator"></span>
        <input [type]="showPassword ? 'text' : 'password'" formControlName="password" autocomplete="new-password" placeholder="Enter password" />

        <div class="input-group-append">
          <span class="input-group-text" 
          (mousedown)="$event.preventDefault()" (click)="togglePasswordVisibility()">
            <i class="fas" [ngClass]="showPassword ? 'fa-eye' : 'fa-eye-slash'"></i>
          </span>
        </div>
      </div>

      <div class="row" class="Submit-reset">
        <div class="col-sm-6 col-md-6  options1">
          <a routerLink="/forgot-password">Reset Password</a>
        </div>
        <div class="col-sm-6 col-md-6 col-lg-6">
          <button type="button" class="login-btn" [disabled]="loginForm.invalid" (click)="onSubmit(1)">Send OTP</button>
        </div>
      </div>
    </form>

    <!-- OTP screen -->

    <form [formGroup]="AuthenticateForm" [hidden]="!OTPScreen" (keyup.enter)="VerifyOTP()" style="margin-bottom: 50px">
      <div style="position: relative" class="p-float-label" style="margin-bottom: 10px">
        <div class="error" *ngIf="d.OTP.touched && d.OTP.invalid">
          <small *ngIf="d.OTP.errors?.['required']" style="color: red;">OTP is required.</small>
        </div>
        <div class="input-group">
          <span class="icon"><i class="fas fa-key"></i></span>
          <span class="separator"></span>
          <input id="OTP" type="text" placeholder="Enter OTP" formControlName="OTP" maxlength="50" />
        </div>
        <p style="text-align: start;color: white;">We have sent an OTP to your registered Email</p>

        <div *ngIf="countdown > 0" style="text-align: start;color: white; margin: 0; padding: 0;">
          Resend OTP available in: {{ countdown }} seconds
        </div>
        <label for="OTP" style="position: absolute;top: -25px;left: 5px;color: #00d084;font-size: 20px;">Enter
          OTP</label>
      </div>
      <div class="row" class="Submit-reset">
        <div class="col-sm-6 col-md-7 pl-0">
          <button type="button" class="resend-btn" [disabled]="countdown > 0 || UserInActivated" (click)="onSubmit(2)">
            Resend OTP
          </button>
        </div>
        <div class="col-sm-6 col-md-5">
          <button type="button" class="login-btn" [disabled]="AuthenticateForm.invalid" (click)="VerifyOTP()">
            Sign In
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- Image Part -->

  <div class="footer-text">
    Work uncomplicated<br />
    <a href="https://www.crownrms.com" target="_blank">www.crownrms.com</a>
  </div>
  <div class="image-box">
    <img src="./assets/co-1.jpg" alt="Login Background" class="responsive-image" />
  </div>
  <img src="./assets/img/Logo1.jpg" alt="Login icon" class="Logo-icon" />
</div>

<ng-template #Help let-c="close" let-d="dismiss" let-modal>
  <div class="card-body">
    1.Enter UserID, Enter Password & Click on Sign in<br />
    2. Helps in finding new password through mail<span style="color: #ffffff; font-weight: bold">Forgot Password</span>
    <br />
    <span>Need More Help?</span><br />
    <span style="color: black; font-weight: bold">We are available hear </span><br />
    <img style="padding-top: 10px; padding-bottom: 10px; height: 41px" src="assets/img/telephone.png" />:<span
      style="padding-top: 10px">7208941973</span><br />
    <img style="height: 25px" src="assets/img/email.png" />:<span style="padding-bottom: 5px">{{ lbl }}</span>
  </div>
</ng-template>

<p-toast position="top-center" [showTransformOptions]="'translateY(100%)'" [showTransitionOptions]="'1000ms'"
  [hideTransitionOptions]="'1000ms'" [showTransformOptions]="'translateX(100%)'"></p-toast>