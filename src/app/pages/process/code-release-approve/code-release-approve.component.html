<div class="header">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                </div>
            </div>
        </div>
    </div>
</div>


<!-- <div class="card flex justify-content-center " style="width: 92%; margin-left: 50px; margin-bottom: 6px;">
    <div class="row">
        <div class="col-10" style="padding-left: 40px; padding-right: 0;">
            <h1 style="padding-top: 6px; margin-bottom: 20px; margin-top: 20px; color: #003564 !important;">
                {{ events[0].ProjectName }}
            </h1>
        </div>
        <div class="col-2 text-right" style="margin-top: 1.5%; padding-right: 2%;">
            <button style="margin-right: 20px;" type="button" class="btn success" pTooltip="Download"
                tooltipPosition="top" (click)="onBack()">
                <i class="fa fa-arrow-left fa-lg"></i>
            </button>
        </div>
    </div>
</div>

<div class="custom-tab-view">
    <div class="row">
        <div class="col-11" style="margin-left: 47px;">
            <div class="row">
                <div class="dataTables_wrapper col"
                    style="background: white;padding: 10px; box-shadow: 0px 20px 53px -30px rgba(95, 102, 173, 0.566816);">
                    <div class="dataTables_wrapper col-10"
                        style="box-shadow: none; background-color: #f6f8fdcf; border-radius: 40px; margin: 5px auto; padding: 43px;">

                        <div class="row">
                            <h1 class="col-6"
                                style="font-family: 'Arial', sans-serif; font-size: 24px; font-weight: bold;">Code
                                Approval</h1>
                        </div>

                        <div class="row ml-1">
                            <div class="col-4 p-0 m-0">
                                <p><strong style="font-weight: bold;">Request Raised By : </strong> {{
                                    events[0].RequestRaiseBy }} </p>
                                <p><strong style="font-weight: bold;">Approved By : </strong> {{
                                    events[0].DepositorApprovedBy }} </p>
                                <p><strong style="font-weight: bold;">Project Status : </strong> {{
                                    events[0].Project_Status }} </p>
                            </div>

                            <div class="col-4 p-0 m-0">
                                <p><strong style="font-weight: bold;">Request Raised Date : </strong> {{
                                    _commonService.formatLocalTime(events[0].RequestRaiseAt) }} </p>
                                <p><strong style="font-weight: bold;">Approved At : </strong> {{
                                    _commonService.formatLocalTime(events[0].DepositorApprovalAt) }} </p>
                                <p><strong style="font-weight: bold;">Version : </strong> {{ events[0].Version }} </p>
                            </div>

                            <div class="col-4 p-0 m-0">
                                <p><strong style="font-weight: bold;">Requester Remarks : </strong> {{
                                    events[0].RaiseRequestComment }} </p>
                                <p><strong style="font-weight: bold;">Approval Remarks : </strong> {{
                                    events[0].DepositorComment }} </p>
                            </div>
                        </div>

                        <div class="col text-right">
                            <form [formGroup]="CodeReleaseForm" (ngSubmit)="onCodeApproval('Approved', events[0])">
                                <div>
                                    <div style="margin-top: 10px; text-align: right;">
                                        <label for="Comment"
                                            style="font-size: 16px; font-family: 'Verdana', sans-serif;display: block; margin-right: 42%;">Comment
                                            *</label>
                                        <textarea formControlName="Comment" rows="5"
                                            style="width: 50%; margin-top: 6px; padding: 5px; font-family: 'Arial', sans-serif; font-size: 16px; border-radius: 10px;"
                                            [ngClass]="{'is-invalid': f.Comment.touched && f.Comment.invalid}"> </textarea>
                                    </div>
                                    <div style="margin-top: 20px; margin-bottom: 20px; text-align: right;">
                                        <button type="submit" [disabled]="CodeReleaseForm.invalid"
                                            style="border-radius: 20px;" class="btn mintbtn">
                                            Approve Request </button>

                                        <button type="button" [disabled]="CodeReleaseForm.invalid" class="btn dangerbtn"
                                            style="border-radius: 20px;"
                                            (click)="onCodeApproval('Rejected', events[0])">Reject Request </button>

                                        <button type="button" class="btn darkbtn" style="border-radius: 20px;"
                                            (click)="onVerifyReset()">Reset</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> -->

<div class="card flex justify-content-center" style="width: 90%; margin-left: 30px; margin-bottom: 24px; background: linear-gradient(135deg, #0A424A 0%, #0f292e 100%); border: none; border-radius: 8px; box-shadow: 0 4px 12px rgba(10, 66, 74, 0.12);">
    <div class="row" style="width: 100%;">
        <div class="col" style="padding-left: 40px; padding-right: 0;">
            <h1 style="padding-top: 28px; margin-bottom: 28px; margin-top: 0; color: #C9F5D9 !important; font-weight: 600; font-size: 26px; letter-spacing: -0.3px;">
                {{ events[0].ProjectName }}
            </h1>
        </div>
        <div class="col-2 text-right" style="margin-top: 28px; padding-right: 40px;">
            <button type="button" class="btn" pTooltip="Back" tooltipPosition="top"
                style="background-color: #C9F5D9; color: #0A424A; border: none; border-radius: 6px; padding: 10px 16px; font-weight: 500; transition: all 0.2s ease; cursor: pointer;"
                onmouseover="this.style.backgroundColor='#00d480'"
                onmouseout="this.style.backgroundColor='#C9F5D9'"
                (click)="onBack()">
                <i class="fa fa-arrow-left fa-lg"></i>
            </button>
        </div>
    </div>
</div>

<div class="custom-tab-view">
    <div class="row">
        <div class="col-11" style="margin-left: 20px;">
            <div class="col">
                <div class="dataTables_wrapper col" style="background-color: #FFFFFF; padding: 0; border: 1px solid #C9F5D9; border-radius: 8px; box-shadow: 0 2px 8px rgba(10, 66, 74, 0.08);">
                    <div class="dataTables_wrapper col-12" style="box-shadow: none; background-color: transparent; border-radius: 0; margin: 0; padding: 40px;">

                        <!-- Section Header -->
                        <div class="row" style="margin-bottom: 24px;">
                            <div class="col-12">
                                <h2 style="font-family: 'Arial', sans-serif; font-size: 22px; font-weight: 600; color: #0A424A; margin: 0; padding-bottom: 16px; border-bottom: 2px solid #C9F5D9;">
                                    Code Approval
                                </h2>
                            </div>
                        </div>

                        <!-- Information Grid -->
                        <div class="row ml-1" style="margin-bottom: 32px;">
                            <div class="col-4 p-0 m-0">
                                <div style="padding-right: 20px;">
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Request Raised By</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].RequestRaiseBy }}</span>
                                    </p>
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor Level-1 Approved By</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].DepositorLevel1ApprovedBy }}</span>
                                    </p>
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor Level-2 Approved By</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].DepositorLevel2ApprovedBy }}</span>
                                    </p>
                                    <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Project Status</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].Project_Status }}</span>
                                    </p>
                                </div>
                            </div>

                            <div class="col-4 p-0 m-0">
                                <div style="padding-right: 20px;">
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Request Raised Date</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ _commonService.formatLocalTime(events[0].RequestRaiseAt) }}</span>
                                    </p>
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor Level-1 Approved Date</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ _commonService.formatLocalTime(events[0].DepositorLevel1ApprovedAt) }}</span>
                                    </p>
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor Level-2 Approved Date</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ _commonService.formatLocalTime(events[0].DepositorLevel2ApprovedAt) }}</span>
                                    </p>
                                    <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Version</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].Version }}</span>
                                    </p>
                                </div>
                            </div>

                            <div class="col-4 p-0 m-0">
                                <div>
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Requester Remarks</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].RaiseRequestComment }}</span>
                                    </p>
                                    <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor Level-1 Comment</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].DepositorLevel1Comment }}</span>
                                    </p>
                                    <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                        <strong style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor Level-2 Comment</strong>
                                        <span style="color: #5A5A5A; font-size: 15px;">{{ events[0].DepositorLevel2Comment }}</span>
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Approval Form Section -->
                        <div class="col text-right">
                            <form [formGroup]="CodeReleaseForm" (ngSubmit)="onCodeApproval('Approved', events[0])">
                                <div style="background-color: #edfaed; padding: 28px; border-radius: 8px; border: 1px solid #C9F5D9;">
                                    <div style="margin-bottom: 24px; text-align: left;">
                                        <label for="Comment" 
                                            style="font-size: 14px; font-weight: 600; color: #0A424A; display: block; margin-bottom: 8px; font-family: 'Verdana', sans-serif;">
                                            Comment <span style="color: #CC0000;">*</span>
                                        </label>
                                        <textarea formControlName="Comment" rows="5"
                                            style="width: 100%; padding: 12px; font-family: 'Arial', sans-serif; font-size: 14px; border-radius: 6px; border: 2px solid #C9F5D9; background-color: #FFFFFF; color: #0f292e; transition: border-color 0.2s ease; resize: vertical;"
                                            onfocus="this.style.borderColor='#00d480'; this.style.outline='none'"
                                            onblur="this.style.borderColor='#C9F5D9'"
                                            [ngClass]="{'is-invalid': f.Comment.touched && f.Comment.invalid}"></textarea>
                                    </div>
                                    
                                    <div style="text-align: right; display: flex; justify-content: flex-end; gap: 12px;">
                                        <button type="submit" [disabled]="CodeReleaseForm.invalid"
                                            style="border-radius: 20px;" class="btn mintbtn">
                                            Approve Request </button>

                                        <button type="button" [disabled]="CodeReleaseForm.invalid" class="btn dangerbtn"
                                            style="border-radius: 20px;"
                                            (click)="onCodeApproval('Rejected', events[0])">Reject Request </button>

                                        <button type="button" class="btn darkbtn" style="border-radius: 20px;"
                                            (click)="onVerifyReset()">Reset</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<p-toast position="top-right" [showTransformOptions]="'translateY(100%)'" [showTransitionOptions]="'1000ms'"
    [hideTransitionOptions]="'1000ms'" [showTransformOptions]="'translateX(100%)'"></p-toast>