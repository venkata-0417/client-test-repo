<div class="header">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                </div>
            </div>
        </div>
    </div>
</div>


<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->

<div *ngIf="Beneficiary">
    <div class="card flex justify-content-center " style="width: 92%; margin-left: 50px; margin-bottom: 6px;">
        <div class="row">
            <div class="col-10" style="padding-left: 40px; padding-right: 0;">
                <h1 style="padding-top: 6px; margin-bottom: 20px; margin-top: 20px; color: #003564 !important;">
                    Project Details
                </h1>
            </div>
        </div>
    </div>

    <div class="custom-tab-view">
        <div class="row">
            <div class="col-11" style="margin-left: 47px;" *ngIf="events && events.length > 0">
                <div class="card" style="width: 100%; margin-left: 5px; ">
                    <div *ngFor="let item of events">
                        <div class="row">
                            <div class="col-11" style="padding-left: 40px; padding-right: 0;">
                                <div class="row align-items-center">
                                    <div class="col-8">
                                        <h3 style="margin-top: 10px;">{{ item.ProjectName }}</h3>
                                    </div>
                                </div>
                                <hr style="margin-top: 0px; margin-bottom: 9px;" />
                                <div class="row">

                                    <div class="col-3 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Recent Pulled By : </strong> {{
                                            item.CodeLastPullBy }} </p>
                                        <p><strong style="font-weight: bold;">Recent Pulled Date : </strong> {{
                                            _commonService.formatLocalTime(item.CodeLastPullAt) }} </p>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Project Status : </strong> {{
                                            item.Project_Status }} </p>
                                        <p><strong style="font-weight: bold;">File Size(MB) : </strong> {{ item.FileSize
                                            |
                                            number:'1.3-3'}} </p>
                                    </div>

                                    <div class="col-2 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Version : </strong> {{ item.Version }}
                                        </p>
                                        <p><strong style="font-weight: bold;">Verification Level : </strong> {{
                                            item.VerificationLevel }} </p>
                                    </div>

                                    <div class="col-2 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Upload Type : </strong> {{ item.UploadType
                                            }} </p>
                                    </div>
                                    <div class="col-1 text-right"
                                        *ngIf="((item.Project_Status === 'Verification Completed' || item.Project_Status === 'Rejected By Depositor' || item.Project_Status === 'Rejected By LEVEL-1 Depositor' || item.Project_Status === 'Rejected By LEVEL-2 Depositor'
                                                || item.Project_Status === 'Rejected By Admin' || item.Project_Status === 'Manual Upload Completed') && item.SubmitStatus === 'Submitted') && !Admin">
                                        <label for=""
                                            style="margin-left: 4rem;margin-bottom: 3px;"><strong>Action</strong></label>
                                        <a><img src="assets/img/Login/coder-release.png" pTooltip="Code Release"
                                                tooltipPosition="top" (click)="CodeReleaseRequest(item)"
                                                style="height: 3rem; width: 3rem; margin-left: 4rem;"
                                                alt="Edit User" /></a>
                                    </div>

                                    <div class="col-1 text-right"
                                        *ngIf="(item.Project_Status === 'Approved By Depositor' || item.Project_Status === 'Approved By LEVEL-2 Depositor' ) && Admin">
                                        <label for=""
                                            style="margin-left: 4rem;margin-bottom: 3px;"><strong>Action</strong></label>
                                        <a><img src="assets/img/Login/Approve.png" pTooltip="Approve Release Request"
                                                tooltipPosition="bottom" (click)="AdminRequestApprove(item)"
                                                style="height: 3rem; width: 3rem;margin-top: 0rem;margin-left: 4rem;"
                                                alt="Edit User" /></a>
                                    </div>
                                    <!-- <div class="col-1 text-right" *ngIf="item.Project_Status === 'Code Release Completed' &&
                                        getRemainingDays(item.AdminApprovalAt) > 0  ">
                                        <label style="margin-left: 4rem; margin-bottom: 3px;">
                                            <strong>
                                                Available in {{ getRemainingDays(item.AdminApprovalAt) }} day(s)
                                            </strong>
                                        </label>
                                    </div>
                                    <div class="col-1 text-right" *ngIf=" item.Project_Status === 'Code Release Completed' &&
                                         getRemainingDays(item.AdminApprovalAt) <= 0   ">
                                        <label style="margin-left: 4rem; margin-bottom: 3px;">
                                            <strong>Action</strong>
                                        </label>

                                        <a>
                                            <img src="assets/img/clouddownload.png" pTooltip="Source Code Download"
                                                tooltipPosition="top" (click)="SourceCodeDownload(item)"
                                                style="height: 35px; width: 35px; margin-left: 4rem;" />
                                        </a>
                                    </div> -->

                                    <!-- Timer Display (When days remaining > 0) -->
                                    <div class="col-1 text-right" *ngIf="item.Project_Status === 'Code Release Completed' &&
                                    getRemainingDays(item.AdminApprovalAt) > 0">
                                        <div
                                            style="background: linear-gradient(135deg, #edfaed 0%, #C9F5D9 100%); padding: 12px 16px; border-radius: 6px; border: 1px solid #00d480; display: inline-block; min-width: 150px; box-shadow: 0 2px 4px rgba(0, 212, 128, 0.15);">
                                            <div style="text-align: center;">
                                                <span
                                                    style="font-size: 11px; color: #0A424A; font-weight: 500; display: block; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px;">Available
                                                    In</span>
                                                <div
                                                    style="display: flex; align-items: center; justify-content: center; gap: 6px;">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <circle cx="12" cy="12" r="10" stroke="#00d480"
                                                            stroke-width="2" />
                                                        <path d="M12 6V12L16 14" stroke="#0A424A" stroke-width="2"
                                                            stroke-linecap="round" />
                                                    </svg>
                                                    <span
                                                        style="font-size: 20px; font-weight: 700; color: #0A424A; line-height: 1;">
                                                        {{ getRemainingDays(item.AdminApprovalAt) }}
                                                    </span>
                                                    <span
                                                        style="font-size: 13px; font-weight: 600; color: #5A5A5A; line-height: 1;">
                                                        day{{ getRemainingDays(item.AdminApprovalAt) !== 1 ? 's' : '' }}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Download Button (When days remaining <= 0) -->
                                    <div class="col-1 text-right" *ngIf="item.Project_Status === 'Code Release Completed' &&
                                     getRemainingDays(item.AdminApprovalAt) <= 0">
                                        <div style="text-align: center;">
                                            <label
                                                style="font-size: 12px; font-weight: 600; color: #0A424A; display: block; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">
                                                Action
                                            </label>
                                            <button type="button" pTooltip="Source Code Download" tooltipPosition="top"
                                                (click)="SourceCodeDownload(item)"
                                                style="background-color: #00d480; color: #0f292e; border: none; border-radius: 6px; padding: 10px 16px; font-weight: 600; font-size: 13px; box-shadow: 0 2px 6px rgba(0, 212, 128, 0.3); transition: all 0.2s ease; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;"
                                                onmouseover="this.style.backgroundColor='#00bf73'; this.style.boxShadow='0 4px 10px rgba(0, 212, 128, 0.4)'; this.style.transform='translateY(-2px)'"
                                                onmouseout="this.style.backgroundColor='#00d480'; this.style.boxShadow='0 2px 6px rgba(0, 212, 128, 0.3)'; this.style.transform='translateY(0)'">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" />
                                                    <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2"
                                                        stroke-linecap="round" stroke-linejoin="round" />
                                                    <path d="M12 15V3" stroke="currentColor" stroke-width="2"
                                                        stroke-linecap="round" stroke-linejoin="round" />
                                                </svg>
                                                <span>Download</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <hr style="margin-bottom: 0px;margin-top: 0px;" /> -->
                        <div style="height: 6px;background-color: rgb(240 243 244);"></div>
                    </div>
                </div>
            </div>

            <div class="col-11 text-center" style="margin-left: 45px;"
                *ngIf="!events || events.length === 0 || events === null">
                <h2 style="margin-top: 20px; color: #003564;">No Project Mapped</h2>
            </div>
        </div>
    </div>
</div>

<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->


<!-- Depositor LEVEL vaise Accept/Reject Request Code -->
<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->

<!-- <div *ngIf="Depositor && LEVEL1">
    <div class="card flex justify-content-center " style="width: 92%; margin-left: 50px; margin-bottom: 6px;">
        <div class="row">
            <div class="col-10" style="padding-left: 40px; padding-right: 0;">
                <h1 style="padding-top: 6px; margin-bottom: 20px; margin-top: 20px; color: #003564 !important;">
                    {{leveltitle}} Pending Requests
                </h1>
            </div>
        </div>
    </div>

    <div class="custom-tab-view">
        <div class="row">
            <div class="col-11" style="margin-left: 47px;" *ngIf="Approval && Approval.length > 0">
                <div class="card" style="width: 100%; margin-left: 5px; ">
                    <div *ngFor="let item of Approval">
                        <div class="row">
                            <div class="col-11" style="padding-left: 40px; padding-right: 0;">
                                <div class="row align-items-center">
                                    <div class="col-8">
                                        <h3 style="margin-top: 10px;">{{ item.ProjectName }}</h3>
                                    </div>
                                </div>
                                <hr style="margin-top: 0px; margin-bottom: 9px;" />
                                <div class="row ml-1">
                                    <div class="col-4 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Request Raised By : </strong> {{
                                            item.RequestRaiseBy }} </p>
                                        <p><strong style="font-weight: bold;">Request Raised Date : </strong> {{
                                            _commonService.formatLocalTime(item.RequestRaiseAt) }} </p>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Project Status : </strong> {{
                                            item.Project_Status }} </p>
                                        <p><strong style="font-weight: bold;">Version : </strong> {{ item.Version }}
                                        </p>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <p><strong style="font-weight: bold;">Raised Request Comment : </strong> {{
                                            item.RaiseRequestComment }} </p>
                                    </div>
                                </div>

                                <div style="margin-top: 10px; text-align: left;">
                                    <button type="button" class="btn darkbtn"
                                        style="border-radius: 20px; margin-right: 10px;" (click)="openPdf(item)">
                                        View PDF
                                    </button>
                                    <button type="button" class="btn darkbtn"
                                        style="border-radius: 20px; margin-right: 10px;" (click)="downloadPdf(item)">
                                        Download PDF
                                    </button>
                                </div>


                                <div class="col text-right">
                                    <form [formGroup]="CodeReleaseForm" (ngSubmit)="onCodeApproval('Approved', item)">
                                        <div>
                                            <div style="margin-top: 10px; text-align: right;">
                                                <label for="Comment"
                                                    style="font-size: 16px; font-family: 'Verdana', sans-serif;display: block; margin-right: 42%;">Comment
                                                    *</label>
                                                <textarea formControlName="Comment" rows="5"
                                                    style="width: 50%; margin-top: 6px; padding: 5px; font-family: 'Arial', sans-serif; font-size: 16px; border-radius: 10px;"
                                                    [ngClass]="{'is-invalid': f.Comment.touched && f.Comment.invalid}"> </textarea>
                                            </div>
                                            <div style="margin-top: 20px; margin-bottom: 20px; text-align: right;">
                                                <button type="submit" [disabled]="CodeReleaseForm.invalid"
                                                    style="border-radius: 20px;" class="btn mintbtn">
                                                    Approve Request </button>

                                                <button type="button" [disabled]="CodeReleaseForm.invalid"
                                                    class="btn dangerbtn" style="border-radius: 20px;"
                                                    (click)="onCodeApproval('Rejected', item)">Reject Request </button>

                                                <button type="button" class="btn darkbtn" style="border-radius: 20px;"
                                                    (click)="onVerifyReset()">Reset</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div style="height: 6px;background-color: rgb(240 243 244);"></div>
                    </div>
                </div>
            </div>

            <div class="col-11 text-center" style="margin-left: 45px;"
                *ngIf="!Approval || Approval.length === 0 || Approval === null">
                <h2 style="margin-top: 20px; color: #003564;">No Pending Requests For Approval</h2>
            </div>
        </div>
    </div>
</div> -->

<div *ngIf="Depositor && LEVEL1">
    <!-- Header Section -->
    <div class="card flex justify-content-center"
        style="width: 92%; margin-left: 50px; margin-bottom: 24px; background: linear-gradient(135deg, #0A424A 0%, #0f292e 100%); border: none; border-radius: 8px; box-shadow: 0 4px 12px rgba(10, 66, 74, 0.12);">
        <div class="row" style="width: 100%;">
            <div class="col-10" style="padding-left: 40px; padding-right: 0;">
                <h1
                    style="padding-top: 28px; margin-bottom: 28px; margin-top: 0; color: #C9F5D9 !important; font-weight: 600; font-size: 26px; letter-spacing: -0.3px;">
                    {{leveltitle}} Pending Requests
                </h1>
            </div>
        </div>
    </div>

    <div class="custom-tab-view">
        <div class="row">
            <!-- Main Content Area -->
            <div class="col-11" style="margin-left: 47px;" *ngIf="Approval && Approval.length > 0">
                <div class="card"
                    style="width: 100%; margin-left: 5px; background-color: #FFFFFF; border: 1px solid #C9F5D9; border-radius: 8px; box-shadow: 0 2px 8px rgba(10, 66, 74, 0.08);">
                    <div *ngFor="let item of Approval; let last = last">
                        <div class="col">
                            <div class="col-12" style="padding: 32px 40px;">
                                <!-- Project Header -->
                                <div class="row align-items-center" style="margin-bottom: 20px;">
                                    <div class="col-8">
                                        <h3 style="margin: 0; color: #0A424A; font-weight: 600; font-size: 20px;">{{
                                            item.ProjectName }}</h3>
                                    </div>
                                </div>

                                <hr style="margin: 0 0 24px 0; border: none; border-top: 2px solid #C9F5D9;" />

                                <!-- Information Grid -->
                                <div class="row ml-1" style="margin-bottom: 28px;">
                                    <div class="col-4 p-0 m-0">
                                        <div style="padding-right: 20px;">
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Request
                                                    Raised By</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{ item.RequestRaiseBy
                                                    }}</span>
                                            </p>
                                            <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Version</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{ item.Version }}</span>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <div style="padding-right: 20px;">
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Request
                                                    Raised Date</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    _commonService.formatLocalTime(item.RequestRaiseAt) }}</span>
                                            </p>
                                            <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Project
                                                    Status</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{ item.Project_Status
                                                    }}</span>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <div>
                                            <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Raised
                                                    Request Comment</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    item.RaiseRequestComment }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- View PDF Button -->
                                <div style="margin-top: 24px; margin-bottom: 28px; text-align: left;">
                                    <button type="button" class="btn"
                                        style="background-color: #0A424A; color: #FFFFFF; border: none; border-radius: 6px; padding: 11px 26px; font-weight: 500; font-size: 14px; box-shadow: 0 2px 4px rgba(10, 66, 74, 0.2); transition: all 0.2s ease; cursor: pointer;"
                                        onmouseover="this.style.backgroundColor='#0f292e'; this.style.boxShadow='0 4px 8px rgba(10, 66, 74, 0.3)'"
                                        onmouseout="this.style.backgroundColor='#0A424A'; this.style.boxShadow='0 2px 4px rgba(10, 66, 74, 0.2)'"
                                        (click)="openPdf(item)">
                                        View Supporting Document
                                    </button>
                                </div>

                                <!-- Approval Form Section -->
                                <div class="col text-right">
                                    <form [formGroup]="CodeReleaseForm" (ngSubmit)="onCodeApproval('Approved', item)">
                                        <div
                                            style="background-color: #edfaed; padding: 28px; border-radius: 8px; border: 1px solid #C9F5D9;">
                                            <div style="margin-bottom: 24px; text-align: left;">
                                                <label for="Comment"
                                                    style="font-size: 14px; font-weight: 600; color: #0A424A; display: block; margin-bottom: 8px; font-family: 'Verdana', sans-serif;">
                                                    Comment <span style="color: #CC0000;">*</span>
                                                </label>
                                                <textarea formControlName="Comment" rows="5"
                                                    style="width: 100%; padding: 12px; font-family: 'Arial', sans-serif; font-size: 14px; border-radius: 6px; border: 2px solid #C9F5D9; background-color: #FFFFFF; color: #0f292e; transition: border-color 0.2s ease; resize: vertical;"
                                                    onfocus="this.style.borderColor='#00d480'; this.style.outline='none'"
                                                    onblur="this.style.borderColor='#C9F5D9'"
                                                    [ngClass]="{'is-invalid': f.Comment.touched && f.Comment.invalid}"></textarea>
                                            </div>

                                            <div
                                                style="text-align: right; display: flex; justify-content: flex-end; gap: 12px;">
                                                <button type="submit" [disabled]="CodeReleaseForm.invalid"
                                                    style="border-radius: 20px;" class="btn mintbtn">
                                                    Approve Request </button>

                                                <button type="button" [disabled]="CodeReleaseForm.invalid"
                                                    class="btn dangerbtn" style="border-radius: 20px;"
                                                    (click)="onCodeApproval('Rejected', item)">Reject Request </button>

                                                <button type="button" class="btn darkbtn" style="border-radius: 20px;"
                                                    (click)="onVerifyReset()">Reset</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Divider between items -->
                        <div *ngIf="!last" style="height: 2px; background-color: #C9F5D9; margin: 0 40px;"></div>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div class="col-11 text-center" style="margin-left: 45px; margin-top: 60px;"
                *ngIf="!Approval || Approval.length === 0 || Approval === null">
                <div
                    style="background: linear-gradient(135deg, #edfaed 0%, #C9F5D9 50%); padding: 60px 40px; border-radius: 8px; border: 2px solid #00d480;">
                    <h2 style="margin: 0; color: #0A424A; font-weight: 600; font-size: 22px;">No Pending Requests For
                        Approval</h2>
                    <p style="color: #5A5A5A; margin-top: 12px; font-size: 15px;">All requests have been processed</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="Depositor && LEVEL2">
    <!-- Header Section -->
    <div class="card flex justify-content-center"
        style="width: 92%; margin-left: 50px; margin-bottom: 24px; background: linear-gradient(135deg, #0A424A 0%, #0f292e 100%); border: none; border-radius: 8px; box-shadow: 0 4px 12px rgba(10, 66, 74, 0.12);">
        <div class="row" style="width: 100%;">
            <div class="col-10" style="padding-left: 40px; padding-right: 0;">
                <h1
                    style="padding-top: 28px; margin-bottom: 28px; margin-top: 0; color: #C9F5D9 !important; font-weight: 600; font-size: 26px; letter-spacing: -0.3px;">
                    {{leveltitle}} Pending Requests
                </h1>
            </div>
        </div>
    </div>

    <div class="custom-tab-view">
        <div class="row">
            <!-- Main Content Area -->
            <div class="col-11" style="margin-left: 47px;" *ngIf="Approval && Approval.length > 0">
                <div class="card"
                    style="width: 100%; margin-left: 5px; background-color: #FFFFFF; border: 1px solid #C9F5D9; border-radius: 8px; box-shadow: 0 2px 8px rgba(10, 66, 74, 0.08);">
                    <div *ngFor="let item of Approval; let last = last">
                        <div class="col">
                            <div class="col-12" style="padding: 32px 40px;">
                                <!-- Project Header -->
                                <div class="row align-items-center" style="margin-bottom: 20px;">
                                    <div class="col-8">
                                        <h3 style="margin: 0; color: #0A424A; font-weight: 600; font-size: 20px;">{{
                                            item.ProjectName }}</h3>
                                    </div>
                                </div>

                                <hr style="margin: 0 0 24px 0; border: none; border-top: 2px solid #C9F5D9;" />

                                <!-- Information Grid -->
                                <div class="row ml-1" style="margin-bottom: 28px;">
                                    <div class="col-4 p-0 m-0">
                                        <div style="padding-right: 20px;">
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Request
                                                    Raised By</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{ item.RequestRaiseBy
                                                    }}</span>
                                            </p>
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor
                                                    Level-1
                                                    Approved By</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    item.DepositorLevel1ApprovedBy
                                                    }}</span>
                                            </p>
                                            <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Version</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{ item.Version }}</span>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <div style="padding-right: 20px;">
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Request
                                                    Raised Date</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    _commonService.formatLocalTime(item.RequestRaiseAt) }}</span>
                                            </p>
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor
                                                    Level-1
                                                    Approved Date</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    _commonService.formatLocalTime(item.DepositorLevel1ApprovedAt)
                                                    }}</span>
                                            </p>
                                            <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Project
                                                    Status</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{ item.Project_Status
                                                    }}</span>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="col-4 p-0 m-0">
                                        <div>
                                            <p style="margin-bottom: 16px; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Raised
                                                    Request Comment</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    item.RaiseRequestComment }}</span>
                                            </p>
                                            <p style="margin-bottom: 0; color: #0f292e; line-height: 1.6;">
                                                <strong
                                                    style="font-weight: 600; color: #0A424A; font-size: 14px; display: block; margin-bottom: 6px;">Depositor
                                                    Level-1
                                                    Comment</strong>
                                                <span style="color: #5A5A5A; font-size: 15px;">{{
                                                    item.DepositorLevel1Comment }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- View PDF Button -->
                                <div style="margin-top: 24px; margin-bottom: 28px; text-align: left;">
                                    <button type="button" class="btn"
                                        style="background-color: #0A424A; color: #FFFFFF; border: none; border-radius: 6px; padding: 11px 26px; font-weight: 500; font-size: 14px; box-shadow: 0 2px 4px rgba(10, 66, 74, 0.2); transition: all 0.2s ease; cursor: pointer;"
                                        onmouseover="this.style.backgroundColor='#0f292e'; this.style.boxShadow='0 4px 8px rgba(10, 66, 74, 0.3)'"
                                        onmouseout="this.style.backgroundColor='#0A424A'; this.style.boxShadow='0 2px 4px rgba(10, 66, 74, 0.2)'"
                                        (click)="openPdf(item)">
                                        View Supporting Document
                                    </button>
                                </div>

                                <!-- Approval Form Section -->
                                <div class="col text-right">
                                    <form [formGroup]="CodeReleaseForm" (ngSubmit)="onCodeApproval('Approved', item)">
                                        <div
                                            style="background-color: #edfaed; padding: 28px; border-radius: 8px; border: 1px solid #C9F5D9;">
                                            <div style="margin-bottom: 24px; text-align: left;">
                                                <label for="Comment"
                                                    style="font-size: 14px; font-weight: 600; color: #0A424A; display: block; margin-bottom: 8px; font-family: 'Verdana', sans-serif;">
                                                    Comment <span style="color: #CC0000;">*</span>
                                                </label>
                                                <textarea formControlName="Comment" rows="5"
                                                    style="width: 100%; padding: 12px; font-family: 'Arial', sans-serif; font-size: 14px; border-radius: 6px; border: 2px solid #C9F5D9; background-color: #FFFFFF; color: #0f292e; transition: border-color 0.2s ease; resize: vertical;"
                                                    onfocus="this.style.borderColor='#00d480'; this.style.outline='none'"
                                                    onblur="this.style.borderColor='#C9F5D9'"
                                                    [ngClass]="{'is-invalid': f.Comment.touched && f.Comment.invalid}"></textarea>
                                            </div>

                                            <div
                                                style="text-align: right; display: flex; justify-content: flex-end; gap: 12px;">
                                                <button type="submit" [disabled]="CodeReleaseForm.invalid"
                                                    style="border-radius: 20px;" class="btn mintbtn">
                                                    Approve Request </button>

                                                <button type="button" [disabled]="CodeReleaseForm.invalid"
                                                    class="btn dangerbtn" style="border-radius: 20px;"
                                                    (click)="onCodeApproval('Rejected', item)">Reject Request </button>

                                                <button type="button" class="btn darkbtn" style="border-radius: 20px;"
                                                    (click)="onVerifyReset()">Reset</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Divider between items -->
                        <div *ngIf="!last" style="height: 2px; background-color: #C9F5D9; margin: 0 40px;"></div>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div class="col-11 text-center" style="margin-left: 45px; margin-top: 60px;"
                *ngIf="!Approval || Approval.length === 0 || Approval === null">
                <div
                    style="background: linear-gradient(135deg, #edfaed 0%, #C9F5D9 50%); padding: 60px 40px; border-radius: 8px; border: 2px solid #00d480;">
                    <h2 style="margin: 0; color: #0A424A; font-weight: 600; font-size: 22px;">No Pending Requests For
                        Approval</h2>
                    <p style="color: #5A5A5A; margin-top: 12px; font-size: 15px;">All requests have been processed</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!---------------------------------------------------------------------------------------------------------------------------------------------------------------->

<p-toast position="top-right" [showTransformOptions]="'translateY(100%)'" [showTransitionOptions]="'1000ms'"
    [hideTransitionOptions]="'1000ms'" [showTransformOptions]="'translateX(100%)'"></p-toast>